apiVersion: 1

# Placeholder: requires future http_5xx view or logs-derived metrics.
# Suggested: create v_http_5xx_rate_daily and update query below.

groups:
  - orgId: 1
    name: http-5xx
    folder: FAP
    interval: 5m
    rules:
      - uid: http-5xx-spike
        title: HTTP 5xx Spike (placeholder)
        condition: C
        data:
          - refId: A
            datasourceUid: fap-mysql
            model:
              format: time_series
              rawSql: "SELECT NOW() as time, 0 as value"
          - refId: B
            datasourceUid: __expr__
            model:
              type: reduce
              reducer: last
              expression: A
          - refId: C
            datasourceUid: __expr__
            model:
              type: threshold
              expression: B
              params:
                - 0.1
        for: 10m
        noDataState: NoData
        execErrState: Error
        annotations:
          summary: "Placeholder alert; requires HTTP 5xx metrics view"
        labels:
          severity: info
